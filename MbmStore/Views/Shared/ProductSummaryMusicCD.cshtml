@using MbmStore.Models
@model IEnumerable<Product>

@foreach (MusicCD musicCD in Model.OfType<MusicCD>().ToList())
{
    <div class="card card-info text-left" style="margin-bottom: 20px;">
        <img class="card-img-top" src="~/Content/Images/@musicCD.ImageUrl" style="width: 100%;" />
        <div class="card-block">
            <h4>@musicCD.Title</h4>
            Artist: @musicCD.Artist<br />
            Released: @musicCD.Released<br />
            Album duration: @musicCD.GetPlayingTime()<br />
            Price: @String.Format("{0:0.00}", musicCD.Price)
            <div class="card-block text-center">
                @using (Html.BeginForm("AddToCart", "Cart", FormMethod.Post))
                {
                    @Html.Hidden("ProductId", musicCD.ProductId)
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    @Html.DropDownList("Quantity", null, "0", new { @class = "custom-select" })
                    <input type="submit" class="btn btn-success" value="Add to cart" />
                }
            </div>
        </div>
        @{ int i = 1; }
        @foreach (Track track in musicCD.Tracks)
                {
            <button type="button" class="list-group-item list-group-item-action justify-content-between">
                <div>
                    @i<span>.&nbsp;</span> @track.Title
                </div>
                <span class="badge badge-default badge-pill">
                    @track.Length.ToString(@"mm\:ss")
                </span>
            </button>

            i++;
        }
        <div class="card-block text-center">
            <a href="#" class="btn btn-primary">View cd details</a>
        </div>
    </div>
}